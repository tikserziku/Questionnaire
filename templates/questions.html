{% extends 'base.html' %}

{% block title %}–û–ø—Ä–æ—Å - {{ '–ù–∞—á–∞–ª—å–Ω—ã–π' if level == 'beginner' else '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π' }} —É—Ä–æ–≤–µ–Ω—å{% endblock %}

{% block content %}
<div class="survey-container">
    <header class="survey-header">
        <h1>{{ '–û–ø—Ä–æ—Å –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö' if level == 'beginner' else '–û–ø—Ä–æ—Å –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö' }}</h1>
        <p class="survey-description">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –ª—É—á—à–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –∫—É—Ä—Å –ø–æ–¥ –≤–∞—à–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏</p>
    </header>

    <form method="post" class="survey-form" id="survey-form">
        <div class="questions-container">
            {% if level == 'beginner' %}
                <div class="question-group">
                    <label for="expectations">1. –ß—Ç–æ –≤—ã –æ–∂–∏–¥–∞–µ—Ç–µ —É–∑–Ω–∞—Ç—å –Ω–∞ —ç—Ç–æ–º –∫—É—Ä—Å–µ?</label>
                    <div class="input-wrapper">
                        <textarea 
                            id="expectations" 
                            name="expectations" 
                            required
                            placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –≤–∞—à–∏—Ö —Ü–µ–ª—è—Ö –∏ –æ–∂–∏–¥–∞–Ω–∏—è—Ö..."
                        ></textarea>
                        <span class="input-focus-border"></span>
                    </div>
                </div>

                <div class="question-group">
                    <label for="programming_experience">2. –ò–º–µ–µ—Ç–µ –ª–∏ –≤—ã –æ–ø—ã—Ç –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏?</label>
                    <div class="input-wrapper">
                        <textarea 
                            id="programming_experience" 
                            name="programming_experience" 
                            required
                            placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à –æ–ø—ã—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –µ—Å–ª–∏ –µ—Å—Ç—å..."
                        ></textarea>
                        <span class="input-focus-border"></span>
                    </div>
                </div>
            {% else %}
                <div class="question-group">
                    <label for="ai_experience">1. –ö–∞–∫–æ–π —É –≤–∞—Å –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å –ò–ò?</label>
                    <div class="input-wrapper">
                        <textarea 
                            id="ai_experience" 
                            name="ai_experience" 
                            required
                            placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å –ò–ò..."
                        ></textarea>
                        <span class="input-focus-border"></span>
                    </div>
                </div>

                <div class="question-group">
                    <label for="tools">2. –° –∫–∞–∫–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–ª–∏?</label>
                    <div class="input-wrapper">
                        <textarea 
                            id="tools" 
                            name="tools" 
                            required
                            placeholder="–ü–µ—Ä–µ—á–∏—Å–ª–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏..."
                        ></textarea>
                        <span class="input-focus-border"></span>
                    </div>
                </div>
            {% endif %}

            <div class="question-group">
                <label for="topics">–ò–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–µ —Ç–µ–º—ã:</label>
                <div class="input-wrapper">
                    <input 
                        type="text" 
                        id="topics" 
                        name="topics" 
                        required
                        placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é..."
                    >
                    <span class="input-focus-border"></span>
                </div>
            </div>

            <div class="question-group">
                <label for="comments">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è:</label>
                <div class="input-wrapper">
                    <textarea 
                        id="comments" 
                        name="comments"
                        placeholder="–í–∞—à–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏..."
                    ></textarea>
                    <span class="input-focus-border"></span>
                </div>
            </div>
        </div>

        <div class="input-assistance">
            <button type="button" id="voice-button" class="assist-button voice">
                <span class="icon">üé§</span>
                <span class="button-text">–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥</span>
            </button>
            
            <button type="button" id="chatgpt-button" class="assist-button chatgpt">
                <span class="icon">üí°</span>
                <span class="button-text">–ü–æ–º–æ—â—å ChatGPT</span>
            </button>
        </div>

        <input type="hidden" name="voice_question" id="voice_question">
        <input type="hidden" name="chatgpt_questions" id="chatgpt_questions">

        <div class="form-actions">
            <button type="submit" class="submit-button">
                <span class="icon">üì§</span>
                <span class="button-text">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</span>
            </button>
        </div>
    </form>

    <!-- ChatGPT Modal -->
    <div id="chatgpt-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–ü–æ–º–æ—â–Ω–∏–∫ ChatGPT</h3>
                <span class="close">&times;</span>
            </div>
            
            <div id="chatgpt-chat" class="chat-container"></div>
            
            <div class="chat-input-container">
                <input 
                    type="text" 
                    id="chatgpt-input" 
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å..."
                    class="chat-input"
                >
                <button id="chatgpt-send" class="chat-send">
                    <span class="icon">üì§</span>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Loading Indicator -->
<div id="loading-indicator">
    <div class="spinner"></div>
    <span class="loading-text">–û–±—Ä–∞–±–æ—Ç–∫–∞...</span>
</div>

<style>
.survey-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem;
}

.survey-header {
    text-align: center;
    margin-bottom: 3rem;
}

.survey-header h1 {
    font-size: 2rem;
    margin-bottom: 1rem;
    color: #ffffff;
}

.survey-description {
    color: #e0e0e0;
    font-size: 1.1rem;
}

.survey-form {
    background: rgba(0, 0, 0, 0.6);
    padding: 2rem;
    border-radius: 15px;
    backdrop-filter: blur(10px);
}

.question-group {
    margin-bottom: 2rem;
}

.question-group label {
    display: block;
    margin-bottom: 0.8rem;
    font-size: 1.1rem;
    color: #ffffff;
}

.input-wrapper {
    position: relative;
}

.input-wrapper input,
.input-wrapper textarea {
    width: 100%;
    padding: 12px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    color: #ffffff;
    font-size: 1rem;
    transition: all 0.3s ease;
}

.input-wrapper textarea {
    min-height: 100px;
    resize: vertical;
}

.input-wrapper input:focus,
.input-wrapper textarea:focus {
    outline: none;
    border-color: #4CAF50;
    background: rgba(255, 255, 255, 0.15);
}

.input-assistance {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
}

.assist-button {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 12px 20px;
    background: rgba(76, 175, 80, 0.2);
    border: 1px solid rgba(76, 175, 80, 0.3);
    border-radius: 8px;
    color: #ffffff;
    cursor: pointer;
    transition: all 0.3s ease;
}

.assist-button:hover {
    background: rgba(76, 175, 80, 0.3);
    transform: translateY(-2px);
}

.submit-button {
    width: 100%;
    padding: 15px;
    background: #4CAF50;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1.1rem;
    cursor: pointer;
    transition: all 0.3s ease;
}

.submit-button:hover {
    background: #45a049;
    transform: translateY(-2px);
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.8);
    z-index: 1000;
}

.modal-content {
    position: relative;
    width: 90%;
    max-width: 600px;
    margin: 5vh auto;
    background: #1a1a1a;
    border-radius: 15px;
    padding: 1.5rem;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.close {
    font-size: 1.5rem;
    color: #ffffff;
    cursor: pointer;
    transition: color 0.3s ease;
}

.close:hover {
    color: #4CAF50;
}

.chat-container {
    height: 300px;
    overflow-y: auto;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    margin-bottom: 1rem;
}

.chat-input-container {
    display: flex;
    gap: 0.5rem;
}

.chat-input {
    flex: 1;
    padding: 12px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 8px;
    color: #ffffff;
}

.chat-send {
    padding: 12px 20px;
    background: #4CAF50;
    border: none;
    border-radius: 8px;
    color: white;
    cursor: pointer;
}

/* Loading Indicator */
#loading-indicator {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.8);
    z-index: 2000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: #4CAF50;
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.loading-text {
    margin-top: 1rem;
    color: #ffffff;
}

/* Responsive Design */
@media (max-width: 768px) {
    .survey-container {
        padding: 1rem;
    }

    .input-assistance {
        flex-direction: column;
    }

    .modal-content {
        width: 95%;
        margin: 2vh auto;
    }
}
</style>
{% endblock %}
